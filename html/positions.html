<!DOCTYPE html>
<html>

<!--
Uses one or more of the following third party modules

Bootstrap
 Bootstrap v3.1.0 (http://getbootstrap.com)
 Copyright 2011-2014 Twitter, Inc.
 Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)

JQuery
 jQuery v1.10.2 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license

Tickertype
 Tickertype JQuery object written by Warren Harrison, August 29, 2011 and retrieved from GitHub: https://github.com/hungrymedia/JQuery-tickertype
 
jQuery 2d Transform v0.9.3
 http://wiki.github.com/heygrady/transform/
 Copyright 2010, Grady Kuhnline
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://jquery.org/license
 Date: Sat Dec 4 15:46:09 2010 -0800
-->

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Website</title>
    <link href="css/custom.css" rel="stylesheet">

    <title>Ballot Path - Positions</title>

	<!-- Bootstrap CSS -->
    <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css" rel="stylesheet">

	<!-- Custom CSS -->    
	<link href="css/landing-page.css" rel="stylesheet">

	<!-- JavaScript -->
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="js/jsonp.js" type="text/javascript"></script>
    <script src="js/purl.js"></script>
    <script src="js/officeCard.js"></script>
</head>

<body class="bgprimary">
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://ballotpath.com">Ballot Path</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse navbar-right navbar-ex1-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="#about">About</a>
                    </li>
                    <li><a href="#services">Partners</a>
                    </li>
                    <li><a href="#contact">Contact Us</a>
                    </li>
                    <li><a href="#contact">Help</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>


<!-- HIDDEN / POP-UP DIV -->
<div id="pop-up">
  <h3>Additional Info</h3>
  <div id="popuptext"></div>
</div>

<div class="intro-header">
	<div class="bg-primary">
		<h1>Your Elected Representatives</h1>
		<form class="form-inline" role="form">
				  <label>
				    <input id="federal-check-box" type="checkbox" value="Federal" checked>
				    Federal
				  </label>
				  <label>
				    <input id="state-check-box" type="checkbox" value="State" checked>
				    State
				  </label>
				  <label>
				    <input id="county-check-box" type="checkbox" value="County" checked>
				    County
				  </label>
				  <label>
				    <input id="city-check-box" type="checkbox" value="City" checked>
				    City
				  </label>
				  <label>
				    <input id="local-check-box" type="checkbox" value="Local" checked>
				    Local
				  </label>
		</form> 	
	</div>		


<div class="container-fluid" style="padding-left: 50px; padding-right 50px;">
    <div class="row" id="cards">

<script>
$(document).ready(function(){
	var hash = getVars();

	$("#hideFederal").click(function() {
		 $(this).parent().toggleClass("active ");
		$(".Federal").parent().toggle('show');
	});

	$("#federal-check-box").change(function() {
		 $(this).toggleClass('active');
		$(".Federal").parent().toggle('show');
	});
	$("#state-check-box").change(function() {
		$(".State").parent().toggle('show');
	});
	$("#county-check-box").change(function() {
		$(".County").parent().toggle('show');
	});
	$("#city-check-box").change(function() {
		$(".Municipal").parent().toggle('show');
	});
	$("#local-check-box").change(function() {
		$(".Local").parent().toggle('show');
	});

// Make all the cards
	var requestURL="http://ec2-54-213-36-220.us-west-2.compute.amazonaws.com/api/office/" + hash['lat'] + "/" + hash['lng'];
	var $resultsArea = $('#cards');
	$.jsonp({
		url: requestURL,
		success: function(data) {
			console.log(data);		
			console.log(data.positions);	
			if (data.positions && data.positions.length > 0) {		
				var positionMatrix = "";
				$.each(data.positions, function(i, card) {
					positionMatrix += '<div class="col-lg-2 col-md-3 col-sm-4 card-cell">\n';
					positionMatrix += officeCard(card);
					positionMatrix += '</div>\n';
				});
				$resultsArea.html(positionMatrix);
			} else {
				$resultsArea.html('<p>No positions found for this distict. Please try again.</p>');
			}

		// Pop-up Effect as mouse hovers over cards:
		// This has to happen AFTER the cards are loaded because they are bound to this
		// function.
		  	var moveLeft = 100;
		  	var moveDown = 30;

		  	$('.office-card-outside').hover(function(e) {
		  		var positionInfo = $( this ).data('carddata');
		  		$('div#popuptext').empty();
		  		$('div#popuptext').append('<p>Bio: ' + positionInfo.notes + '</p>');
		    	$('div#pop-up').show()
		      	.css('top', e.pageY + moveDown)
		      	.css('left', e.pageX + moveLeft)
		      	.appendTo('body');
		  	}, function() {
		    	$('div#pop-up').hide();
		  	});

		  	$('.office-card-outside').mousemove(function(e) {
		    	$("div#pop-up").css('top', e.pageY + moveDown).css('left', e.pageX - moveLeft);
		  	});
		// End of pop-up effect
		}
	});



});
</script>

  	</div> <!-- end row -->
</div> <!-- End Container -->
</div> <!-- End Intro Header -->
</body>
</html>

